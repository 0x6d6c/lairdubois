{% extends 'LadbCoreBundle:Funding:_layout.html.twig' %}

{% use 'LadbCoreBundle:Common:_list-autopager.blocks.html.twig' %}

{% set tab = 'list' %}

{% set masonry = false %}
{% set masonryWide = false %}

{% block bodyJavascripts %}
    {{ parent() }}
    {{ block('autopagerScript') }}
{% endblock %}

{% block bodyContainerContent %}
    <div class="row">
        <br/>
        <div class="col-sm-7 col-xs-12">
            {% embed 'LadbCoreBundle:Common:_list-filterbar.part.html.twig' with { 'classes':'ladb-filterbar-line' } %}
                {% set filterDefs = {
                    'recent':  { 'label':'Récents', 'path':path('core_funding_list', { 'filter':'recent' }) },
                } %}
                {% block filterbarRightContent%}
                    <span class="ladb-heading">{{ donationCount }} {% transchoice donationCount %}[0,1]don|]1,Inf]dons{% endtranschoice %}</span>
                {% endblock %}
            {% endembed %}
            {{ block('autopagerContainer') }}
        </div>
        <div class="col-sm-5 col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>Statistiques</h4>
                </div>
                <div class="panel-body">
                    <table width="100%">
                        <tr>
                            <td>Montant total brut</td>
                            <td class="ladb-amount">{{ app.user.meta.donationBalanceEur|number_format(2, ',', ' ') }}€</td>
                        </tr>
                        <tr>
                            <td>Montant total net</td>
                            <td class="ladb-amount">{{ (app.user.meta.donationBalanceEur - app.user.meta.donationFeeBalanceEur)|number_format(2, ',', ' ') }}€</td>
                        </tr>
                        <tr>
                            <td>Don moyen</td>
                            <td class="ladb-amount">{% if app.user.meta.donationBalanceEur > 0 %}{{ (app.user.meta.donationBalanceEur / app.user.meta.donationCount)|number_format(2, ',', ' ') }}€{% else %}-{% endif %}</td>
                        </tr>
                    </table>

                </div>
            </div>

        </div>
    </div>
{% endblock %}

{% block autopagerContainerInner %}
    {% include 'LadbCoreBundle:Funding:_list-n.part.html.twig' %}
{% endblock %}